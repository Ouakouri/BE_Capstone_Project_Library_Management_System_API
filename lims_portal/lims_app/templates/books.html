<!DOCTYPE html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
  
{% extends "index.html" %}
{% load static %}

{% block main_content %}
<div class="container-flex justify-content-center align-items-center" style="padding-top: 10px; padding-bottom: 20px; margin-top: 10px; vertical-align: middle;"></div>
<div class="row justify-content-center align-middle" style="margin-top: 10px; height: 60px;">
    <div class="col-md-4 text-center">
        <h4>Search books</h4>
    </div>
  </div>
  <div class="row">
    <div class="col-md-4 text-light text-center" style="background: #574a26;">
        <h4 style="margin-top: 15px;">Register new book</h4>
   </div>
  </div>
  <div class="row">
    <div class="col-md-4">
      <div class="container" style="overflow-y: auto; height: 600px; background: #f3e39d;">
        <form class="d-flex" action="/books/add" method="POST">
          {% csrf_token %}
          <table class="table mt-4">
            <tr>
                <td class="text-left align-middle pl-3">Title:</td>
                <td><input type="text" class="form-control" name="title" placeholder="Enter book title"></td>
            </tr>
            <tr>
                <td class="text-left align-middle pl-3">Author:</td>
                <td><input type="text" class="form-control" name="author" placeholder="Enter author name"></td>
            </tr>
            <tr>
                <td class="text-left align-middle pl-3">ISBN:</td>
                <td><input type="text" class="form-control" name="isbn" placeholder="Enter ISBN number"></td>
            </tr>
            <tr>
                <td class="text-left align-middle pl-3">Published Date:</td>
                <td><input type="date" class="form-control" name="published_date"></td>
            </tr>
            <tr>
                <td class="text-left align-middle pl-3">Number of Copies Available:</td>
                <td><input type="number" class="form-control" name="copies_available" min="1" placeholder="Enter number of copies"></td>
            </tr>
            <tr>
                <td colspan="2" class="text-center">
                    <button class="btn btn-primary" type="submit">Save</button>
                </td>
            </tr>
        </table>        
        </form>
      </div>
    </div>
    <div class="col-md-8">
      <!-- Navbar section with search form -->
      <div class="row">
          <nav class="navbar bg-light py-3">
              <div class="container-fluid justify-content-center align-items-center">
                  <form class="d-flex" role="search" action="/books" method="POST">
                      {% csrf_token %}
                      <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" name="query" value="{{ query }}">
                      <button class="btn btn-outline-primary" type="submit">Search</button>
                  </form>
              </div>
          </nav>
      </div>    
  
      <!-- Book count display -->
      <div class="row mt-4">
          <p>{{ books|length }} books available.</p>
      </div>
          
      <!-- Books table section -->
      <div class="row mt-4">
          <div class="table-responsive" style="max-height: 400px; overflow-y: auto;">
              <table class="table table-hover align-middle">
                  <thead class="table-dark">
                      <tr>
                          <th>Title</th>
                          <th>Author</th>
                          <th>ISBN</th>
                          <th>Published Date</th>
                          <th>Copies Available</th>
                      </tr>
                  </thead>
                  <tbody>
                      {% for book in books %}
                      <tr>
                          <td>{{ book.id }}</td>
                          <td>
                              {% if book.active %}
                                  <span class="badge bg-success">{{ book.title }}</span>
                              {% else %}
                                  <span class="badge bg-secondary">{{ book.title }}</span>
                              {% endif %}
                          </td>
                          <td>{{ book.author }}</td>
                          <td>{{ book.isbn }}</td>
                          <td>{{ book.published_date }}</td>
                          <td>{{ book.copies_available }}</td>
                      </tr>
                      {% endfor %}
                  </tbody>
              </table>
          </div>
      </div>
  </div>  
  </div>
</div>
 
{% endblock %}